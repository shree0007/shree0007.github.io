<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title>Shree Portfolio</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/favicon.png" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <style>
        /* ---------- MAIN CONTAINER ---------- */
        #main {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* Background settings */
            background-image: url('/images/carbon-footprint.jpg');
            background-repeat: no-repeat;
            background-size: 100% 100%;
            /* Stretch to fill width and height */
            background-position: top center;
            min-height: 100vh;
            /* Ensure at least viewport height */
        }

        .profile-photo {
            width: 220px;
            /* Adjust size */
            height: 220px;
            border-radius: 50%;
            /* Makes it circular */
            object-fit: cover;
            /* Ensures it fills the circle nicely */
            display: block;
            margin: 0 auto 1rem auto;
            /* Center horizontally, add bottom spacing */
            border: 3px solid #0078d4;
            /* Optional border to match your theme */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            /* Soft shadow */
        }

        #intro img,
        #intro h1,
        #intro p,
        #intro .actions {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s forwards;
        }

        #intro img {
            animation-delay: 0.2s;
        }

        #intro h1 {
            animation-delay: 0.4s;
        }

        #intro p {
            animation-delay: 0.6s;
        }

        #intro .actions {
            animation-delay: 0.8s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        .major p {
            font-style: normal;
        }

        #mainContainer {
            max-width: 1200px;
            margin: auto;
        }

        .carbon-footprint-heading {
            color: #0D3B66;
            font-size: 2.5rem;
            font-weight: bold;
        }

        /* ---------- CALCULATOR SECTIONS ---------- */
        .calculator-section {
            background: #fff;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .calculator-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }

        /* .calculator-section h4 {
            text-align: center;
            color: #0078d4;
            font-weight: 600;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
        } */

        /* ---------- LABELS ---------- */
        label {
            display: block;
            margin: 0.5rem 0 0.25rem;
            font-weight: 500;
            color: #333;
        }

        /* ---------- INPUTS & SELECTS ---------- */
        #main input[type="number"],
        #main select {
            width: 100% !important;
            padding: 0.65rem 0.8rem !important;
            border-radius: 10px !important;
            border: 1px solid #ccc !important;
            font-size: 1rem !important;
            margin-bottom: 1rem !important;
            background: #fdfdfd !important;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05) !important;
            outline: none !important;
            transition: all 0.2s !important;
        }

        #main input[type="number"]:focus,
        #main select:focus {
            border-color: #0078d4 !important;
            box-shadow: 0 0 8px rgba(0, 120, 212, 0.3) !important;
        }

        #main select.transport-select {
            font-size: 1rem;
            /* match input */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            /* text color */
            width: 100% !important;
            padding: 0.65rem 0.8rem;
            /* same as input */
            border-radius: 10px;
            border: 1px solid #ccc;
            margin-bottom: 1rem;
            background: #fdfdfd;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            outline: none;
            transition: all 0.2s;

            /* Remove fixed height */
            height: auto;
        }

        /* Style the placeholder when select has no value */
        #main select.transport-select:invalid {
            color: #999;
        }

        /* Style actual selected options */
        #main select.transport-select option {
            color: #333;
        }

        #main select.transport-select:focus {
            border-color: #0078d4 !important;
            box-shadow: 0 0 8px rgba(0, 120, 212, 0.3) !important;
        }



        /* ---------- BUTTONS ---------- */
        .btn-primary {
            width: 100% !important;
            /* padding: 0.8rem !important; */
            border-radius: 10px !important;
            border: none !important;
            font-weight: 600 !important;
            font-size: 1rem !important;
            cursor: pointer !important;
            background: linear-gradient(90deg, #0078d4, #00aaff) !important;
            color: #fff !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
            transition: all 0.3s ease !important;
            margin-bottom: 0.5rem;
        }

        .btn-primary:hover {
            background: linear-gradient(90deg, #69acee, #0088cc) !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2) !important;
        }

        .btn-action {
            width: 100% !important;
            /* padding: 0.8rem !important; */
            border-radius: 10px !important;
            border: none !important;
            font-weight: 600 !important;
            font-size: 1rem !important;
            cursor: pointer !important;
            background: linear-gradient(90deg, #28a745, #45d06c) !important;
            color: #fff !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
            transition: all 0.3s ease !important;
            margin-bottom: 0.5rem;
        }

        .btn-action:hover {
            background: linear-gradient(90deg, #6abb7b, #32b247) !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2) !important;
        }

        .btn-clear {
            width: 100%;
            color: red !important;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            border-radius: 8px;
            background-color: #fff;
            cursor: pointer;
            transition: all 0.2s;
            /* default black border */
            outline: none !important;
            /* remove default focus outline */
        }

        .btn-clear:hover,
        .btn-clear:focus {
            border: 2px solid #000 !important;
            /* keep black on hover/focus */
            transform: translateY(-2px);
            color: red !important;
            box-shadow: none !important;
            /* remove unwanted shadow if any */
        }


        .btn-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            /* color: #d9534f; */
            cursor: pointer;
            font-size: 0.85rem;
            /* text-decoration: underline; */
        }

        /* ---------- RESULT ---------- */
        #result {
            margin-top: 1rem;
            font-size: 1.15rem;
            text-align: center;
            color: #222;
            font-weight: 600;
        }

        /* ---------- SEGMENTS ---------- */
        /* Darker shadow for journey segments */
        .segment {
            background: #fdfdfd !important;
            padding: 1rem 1.2rem !important;
            border-radius: 10px !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2) !important;
            /* stronger shadow */
            position: relative !important;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 1rem;
        }

        .segment:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3) !important;
            /* darker hover shadow */
        }


        /* Make transport mode labels normal */
        .calculator-section:nth-of-type(2) .checkbox-label {
            font-weight: normal;
            /* Remove bold */
            text-transform: none;
            /* Remove uppercase */
            font-size: 0.8rem;
            /* Normal size */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* match body font */
            color: #333;
            /* optional: ensure readable color */
        }


        /* ---------- CUSTOM CHECKBOXES ---------- */
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: 500;
            margin-bottom: 0.5rem;
            user-select: none;
            position: relative;
        }

        .checkbox-label input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .checkbox-label span {
            width: 22px;
            height: 22px;
            border: 2px solid #0078d4;
            border-radius: 6px;
            display: inline-block;
            margin-right: 0.6rem;
            position: relative;
            box-sizing: border-box;
            transition: all 0.2s;
        }

        .checkbox-label input[type="checkbox"]:checked+span::after {
            content: '‚úî';
            position: absolute;
            left: 3px;
            top: -1px;
            font-size: 16px;
            color: #0078d4;
        }

        /* ---------- CHART RESPONSIVENESS ---------- */
        .chart-wrapper {
            width: 100%;
            margin-top: 1rem;
        }

        /* Make chart taller so it looks fuller */
        #chartContainer {
            display: none;
            /* hide by default */
            width: 100%;
        }

        #chartContainer canvas {
            width: 100% !important;
            height: 320px !important;
        }

        /* Mobile: stretch chart edge-to-edge */
        @media (max-width: 768px) {
            .chart-wrapper {
                margin-left: -1rem;
                margin-right: -1rem;
            }

            #chartContainer {
                padding: 0.5rem;
            }

            #chartContainer canvas {
                height: 360px !important;
            }

            .btn-primary,
            .btn-action {
                font-size: 0.9rem !important;
                padding: 0.7rem 0.6rem !important;
                line-height: 1.2;
                text-align: center;
            }
        }

        /* Extra-small screens (phones) */
        @media (max-width: 480px) {

            .btn-primary,
            .btn-action {
                font-size: 0.8rem !important;
                /* smaller text */
                padding: 0.65rem 0.6rem !important;
                line-height: 1.2;
                white-space: normal;
                /* allow wrapping */
                word-break: break-word;
                text-align: center;
            }
        }
    </style>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper" class="fade-in">

        <!-- Intro -->
        <div id="intro">
            <img src="images/profile.jpg" alt="Shree Ram Bhusal" class="profile-photo">
            <h1>Shree Ram<br />
                Bhusal</h1>
            <p>Early-career environmental engineer with a Master‚Äôs in Circular Economy and
                strong interest in LCA and sustainability.
                <br />
                Foundational knowledge across ESG, CSRD, ESRS, EU Taxonomy, EPD, Environmental Management Systems,<br />
                and ICT and data analytics, with working familiarity in GaBi, SQL, Excel, Tableau, Power BI, and
                Python.<br /><a href="https://www.linkedin.com/in/shree-ram-bhusal-629aa8a2/" target="_blank">
                    @Linkedin </a>
            </p>
            <ul class="actions">
                <li><a href="#header" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
            </ul>
        </div>

        <!-- Header -->
        <header id="header">
            <a href="index.html" class="logo">Shree üåø</a>
        </header>

        <!-- Nav -->
        <nav id="nav">
            <ul class="links">
                <li class="active"><a href="/index.html">Carbon Footprint</a></li>
                <li><a href="projects.html"> Data Projects</a></li>
                <li><a href="education.html">Education</a></li>
                <li><a href="certifications.html">certifications</a></li>
                <li><a href="work.html">Work Experience</a></li>
                <li><a href="about-me.html">About Me</a></li>
            </ul>
            <ul class="icons">
                <li><a href="https://www.linkedin.com/in/shree-ram-bhusal-629aa8a2/" target="_blank"
                        class="icon brands fa-linkedin"><span class="label">linkedin</span></a>
                </li>
                <li><a href="https://github.com/shree0007" target="_blank" class="icon brands fa-github"><span
                            class="label">GitHub</span></a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div id="main">
            <section class="post">
                <header class="major">
                    <h1 class="carbon-footprint-heading">Carbon Footprint Calculator üåé </h1>
                    <p>Calculate the carbon footprint of your journey to understand its environmental impact and
                        identify opportunities to reduce emissions in the future. Below, you can also compare the carbon
                        footprints of different transportation modes. The emission factors used for each transport mode
                        are based on data from Finland.</p>
                </header>

                <div id="mainContainer">

                    <!-- First Calculator -->
                    <div class="calculator-section">
                        <h3>Calculate Your Carbon Footprint</h3>
                        <div id="segments"></div>
                        <button class="btn-primary" onclick="addSegment()"> Add Journey ‚ûï</button>
                        <button class="btn-action" onclick="calculateTotal()"> Calculate Total Carbon Footprint
                            üåé</button>
                        <button class="btn-clear" onclick="clearJourney()"> Clear üóëÔ∏è
                        </button>
                        <p id="result"></p>
                    </div>

                    <!-- Second Calculator -->
                    <div class="calculator-section">
                        <h3>Compare Vehicle Emissions</h3>
                        <label for="compareDistance">Distance (km):</label>
                        <input type="number" id="compareDistance" placeholder="Enter distance">

                        <label>Select Transport Modes:</label>
                        <!-- Cars -->
                        <label class="checkbox-label">
                            <input type="checkbox" value="car"><span></span>
                            üöó Car (average petrol/diesel)
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" value="electric_vehicle"><span></span>
                            ‚ö°üöó Car (electric)
                        </label>

                        <!-- Buses -->
                        <label class="checkbox-label">
                            <input type="checkbox" value="bus"><span></span>
                            üöå Buses (fleet average)
                        </label>

                        <!-- Rail -->
                        <label class="checkbox-label">
                            <input type="checkbox" value="train"><span></span>
                            üöÜ Train
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" value="metro"><span></span>
                            üöá Metro
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" value="tram"><span></span>
                            üöã Tram
                        </label>

                        <!-- Air & Sea -->
                        <label class="checkbox-label">
                            <input type="checkbox" value="plane"><span></span>
                            ‚úàÔ∏è Plane
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" value="ferry"><span></span>
                            ‚õ¥Ô∏è Ferry
                        </label>

                        <!-- Active transport -->
                        <label class="checkbox-label">
                            <input type="checkbox" value="cycling"><span></span>
                            üö¥‚Äç‚ôÇÔ∏è Cycling
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" value="walking"><span></span>
                            üö∂‚Äç‚ôÇÔ∏è Walking
                        </label>


                        <button class="btn-primary" onclick="showComparison()"> Show Comparison üìä</button>
                        <button class="btn-clear" onclick="clearComparison()">Clear üóëÔ∏è
                        </button>
                        <div class="chart-wrapper">
                            <div id="chartContainer">
                                <canvas id="co2Chart"></canvas>
                            </div>
                        </div>

                    </div>

                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer id="footer">
            <section>
                <section>
                    <h3>Email</h3>
                    <p><a href="mailto:shree.bhusal07@gmail.com">shree.bhusal07@gmail.com</a></p>
                </section>
                <section>
                    <h3>Phone</h3>
                    <p>0402474809</p>
                </section>
            </section>
            <section class="alt">
                <section class="alt">
                    <h3>Address</h3>
                    <p>Helsinki, Finland</p>
                </section>
                <section>
                    <h3>Social</h3>
                    <ul class="icons alt">
                        <li><a href="https://www.linkedin.com/in/shree-ram-bhusal-629aa8a2/" target="_blank"
                                class="icon brands alt fa-linkedin"><span class="label">linkedin</span></a></li>
                        <li><a href="https://github.com/shree0007" target="_blank"
                                class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                    </ul>
                </section>
            </section>
        </footer>

        <!-- Copyright -->
        <div id="copyright">
            <ul>
                <li>&copy; Shree</li>
            </ul>
        </div>

    </div>

    <script>
        const factors = {
            car: 108,                // Average petrol/diesel car
            electric_vehicle: 0,      // Tailpipe emissions for electric car
            bus: 27,                  // Fleet-average bus (diesel, biogas, electric)
            train: 1.4,               // Mostly electric, long-distance trains
            metro: 1,                 // Urban electric rail
            tram: 1,                  // Urban electric rail
            plane: 273,               // Includes radiative forcing
            ferry: 170,               // Average Finnish ferry
            cycling: 5,               // Life-cycle (bike + food)
            walking: 0                // Life-cycle (food only)
        };


        let segmentCount = 0;

        let autoUpdateEnabled = false; // Track if auto-update should start

        function addSegment() {
            segmentCount++;
            const div = document.createElement("div");
            div.className = "segment";
            div.id = `segment-${segmentCount}`;

            let removeButton = '';
            if (segmentCount > 1) {
                removeButton = `<span class="btn-remove" onclick="removeSegment(${segmentCount})"> ‚ùå </span>`;
            }

            div.innerHTML = `
                <h4 style="color: #0088cc; font-size: 1.1rem;">Joureny ${segmentCount}</h4>
                <label for="distance-${segmentCount}">Distance (km):</label>
                <input type="number" id="distance-${segmentCount}" placeholder="e.g., 10">
                <label for="transport-${segmentCount}">Transport Mode:</label>

 <select id="transport-1" class="transport-select" required>
    <option value="" selected disabled>Select</option>
    <option value="car">üöó Car (average petrol/diesel)</option>
    <option value="electric_vehicle">‚ö°üöó Car (electric)</option>
    <option value="bus">üöå Bus (fleet average)</option>
    <option value="train">üöÜ Train</option>
    <option value="metro">üöá Metro</option>
    <option value="tram">üöã Tram</option>
    <option value="plane">‚úàÔ∏è Plane</option>
    <option value="ferry">‚õ¥Ô∏è Ferry</option>
    <option value="cycling">üö¥‚Äç‚ôÇÔ∏è Cycling</option>
    <option value="walking">üö∂‚Äç‚ôÇÔ∏è Walking</option>
</select>



                ${removeButton}
            `;
            document.getElementById("segments").appendChild(div);
        }

        // Remove a journey segment
        function removeSegment(id) {
            const div = document.getElementById(`segment-${id}`);
            if (div) {
                div.remove();

                // Renumber remaining segments
                const segments = document.querySelectorAll('.segment');
                segmentCount = segments.length; // update total count

                segments.forEach((seg, index) => {
                    const newIndex = index + 1;
                    seg.id = `segment-${newIndex}`;

                    // Update header number
                    const header = seg.querySelector('h4');
                    header.innerText = `Journey ${newIndex}`;

                    // Update input and select IDs
                    const distInput = seg.querySelector('input[type="number"]');
                    const transportSelect = seg.querySelector('select');
                    distInput.id = `distance-${newIndex}`;
                    transportSelect.id = `transport-${newIndex}`;

                    // Update remove button onclick
                    const removeBtn = seg.querySelector('.btn-remove');
                    if (removeBtn) {
                        removeBtn.setAttribute('onclick', `removeSegment(${newIndex})`);
                    }
                });

                // Recalculate total if any valid input
                let hasValidInput = false;
                segments.forEach(seg => {
                    const dist = seg.querySelector('input[type="number"]').value;
                    const mode = seg.querySelector('select').value;
                    if (dist || mode) hasValidInput = true;
                });

                if (hasValidInput) {
                    calculateTotal();
                } else {
                    document.getElementById("result").innerHTML = "";
                }
            }
        }


        // Calculate total carbon footprint
        function calculateTotal() {
            if (segmentCount === 0) {
                alert("Please add at least one journey segment.");
                return;
            }

            let total = 0;
            let hasValidSegment = false; // At least one segment has valid input
            let allEmpty = true; // Track if all segments are empty

            for (let i = 1; i <= segmentCount; i++) {
                const div = document.getElementById(`segment-${i}`);
                if (!div) continue;

                const distInput = document.getElementById(`distance-${i}`);
                const transportSelect = document.getElementById(`transport-${i}`);

                const dist = parseFloat(distInput.value);
                const mode = transportSelect.value;

                // If at least one field is filled, segments are not all empty
                if (!isNaN(dist) && dist > 0 || mode) allEmpty = false;

                // Skip completely empty segments
                if ((isNaN(dist) || dist <= 0) && !mode) continue;

                // Validate partially filled segments
                if (isNaN(dist) || dist <= 0) {
                    alert(`Enter a valid distance for journey ${i}`);
                    distInput.focus();
                    return;
                }
                if (!mode) {
                    alert(`Please select a transportation mode for journey ${i}`);
                    transportSelect.focus();
                    return;
                }

                total += dist * factors[mode];
                hasValidSegment = true;
            }

            // If all segments are empty, show alert
            if (allEmpty) {
                alert("Please select the distance and transportation mode for your journey.");
                return;
            }

            // If no valid segments (all skipped), clear result
            if (!hasValidSegment) {
                document.getElementById("result").innerHTML = "";
                return;
            }

            document.getElementById("result").innerHTML =
                `üöÄ Total CO‚ÇÇ emissions: <strong>${(total / 1000).toFixed(3)} kg CO‚ÇÇe</strong>`;
        }


        addSegment(); // Add initial segment

        function showComparison() {
            const comparisonSection = document.querySelectorAll('.calculator-section')[1]; // 2nd calculator
            const distanceInput = comparisonSection.querySelector('#compareDistance');
            const distance = parseFloat(distanceInput.value);
            const checkboxes = comparisonSection.querySelectorAll('input[type="checkbox"]:checked');

            // -----------------------------
            // First click validation alerts
            // -----------------------------
            if (!autoUpdateEnabled) {
                if (isNaN(distance) || distance <= 0) {
                    alert('Please enter a valid distance before showing the comparison.');
                    return;
                }
                if (checkboxes.length === 0) {
                    alert('Please select at least one transport mode before showing the comparison.');
                    return;
                }
            }

            // -----------------------------
            // Auto-update behavior (after first click)
            // -----------------------------
            if (checkboxes.length === 0 || isNaN(distance) || distance <= 0) {
                // Reset chart if invalid input or all unchecked
                if (window.co2ChartInstance) window.co2ChartInstance.destroy();
                comparisonSection.querySelector('#chartContainer').style.display = 'none';
                return;
            }

            // -----------------------------
            // Build chart data
            // -----------------------------
            const labels = [], data = [];
            checkboxes.forEach(cb => {
                labels.push(cb.parentElement.textContent.trim());
                data.push(distance * factors[cb.value] / 1000);
            });

            if (window.co2ChartInstance) window.co2ChartInstance.destroy();
            const ctx = comparisonSection.querySelector('#co2Chart').getContext('2d');

            const labelFontSize = window.innerWidth <= 480 ? 8 : window.innerWidth <= 768 ? 10 : 12;
            const legendFontSize = window.innerWidth <= 480 ? 10 : window.innerWidth <= 768 ? 12 : 14;

            window.co2ChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels,
                    datasets: [{
                        label: 'CO‚ÇÇ emissions (kg)',
                        data,
                        backgroundColor: 'rgba(0,120,212,0.7)',
                        borderColor: 'rgba(0,120,212,1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { font: { size: legendFontSize } } }
                    },
                    scales: {
                        x: { ticks: { font: { size: labelFontSize }, maxRotation: 45, minRotation: 30, autoSkip: false } },
                        y: { beginAtZero: true, ticks: { font: { size: labelFontSize } } }
                    }
                }
            });

            comparisonSection.querySelector('#chartContainer').style.display = 'block';

            // -----------------------------
            // Enable auto-update after first click
            // -----------------------------
            if (!autoUpdateEnabled) {
                autoUpdateEnabled = true;

                // Hide the Show Comparison button after first click (only in 2nd calculator)
                comparisonSection.querySelector('.btn-primary').style.display = 'none';

                // Attach checkbox change listeners
                comparisonSection.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.addEventListener('change', showComparison);
                });
            }
        }



        function clearJourney() {
            document.getElementById("segments").innerHTML = "";
            segmentCount = 0;
            addSegment();
            document.getElementById("result").innerHTML = "";
        }

        function clearComparison() {
            const comparisonSection = document.querySelectorAll('.calculator-section')[1]; // 2nd calculator

            const checkboxes = comparisonSection.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => {
                cb.checked = false;

                // Remove previously attached change listeners
                const newCb = cb.cloneNode(true); // clone node removes all event listeners
                cb.parentNode.replaceChild(newCb, cb);
            });

            comparisonSection.querySelector('#compareDistance').value = "";

            if (window.co2ChartInstance) window.co2ChartInstance.destroy();
            comparisonSection.querySelector('#chartContainer').style.display = 'none';

            // Stop auto-update
            autoUpdateEnabled = false;

            // Show the Show Comparison button again (only in 2nd calculator)
            comparisonSection.querySelector('.btn-primary').style.display = 'block';
        }

    </script>


    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

</body>

</html>